<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>She Deserves - AI Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

  <!-- Navbar -->
  <nav class="sticky top-0 bg-white shadow-sm z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="#" class="text-2xl font-bold text-pink-500">She Deserves</a>
      </div>
    </div>
  </nav>

  <!-- Main -->
  <main class="flex-1 flex flex-col items-center justify-center p-4">
    <div class="w-full max-w-4xl bg-white rounded-xl shadow-lg border border-gray-200 flex flex-col h-[80vh]">
      
      <!-- Header -->
      <div class="bg-pink-50 p-6 rounded-t-xl flex items-center space-x-4">
        <div class="w-12 h-12 flex items-center justify-center bg-pink-200 rounded-full text-pink-600">
          <i class="fas fa-robot text-xl"></i>
        </div>
        <div>
          <h1 class="text-xl font-bold text-pink-700">AI Health Assistant</h1>
          <p class="text-sm text-gray-500">Confidential answers to your sexual & reproductive health questions.</p>
        </div>
      </div>

      <!-- Chat -->
      <div id="chat-container" class="flex-1 overflow-y-auto p-6 space-y-4 chat-history">
        <div id="initial-chat-state" class="flex flex-col items-center justify-center h-full text-center text-gray-400">
          <i class="fas fa-comments text-4xl mb-4"></i>
          <h2 class="text-xl font-bold text-gray-700">Start the conversation</h2>
          <p class="mt-2 text-gray-500">Ask me anything about menstruation, sexual health, and more.</p>
        </div>
      </div>

      <!-- Input -->
      <div class="border-t p-4 flex items-center bg-white rounded-b-xl">
        <input id="chat-input" type="text" placeholder="Type your message..." class="flex-1 p-3 rounded-full bg-gray-100 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500">
        <button id="send-btn" class="ml-2 w-12 h-12 flex items-center justify-center bg-pink-500 text-white rounded-full hover:bg-pink-600">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
      <div class="px-4 pb-4 text-xs text-center text-gray-500">
        This chat is for educational purposes only. Please consult a healthcare provider for medical advice.
      </div>
    </div>
  </main>

  <!-- Chat Logic -->
  <script>
    const chatContainer = document.getElementById("chat-container");
    const inputField = document.getElementById("chat-input");
    const sendBtn = document.getElementById("send-btn");
    const initialState = document.getElementById("initial-chat-state");

    function addMessage(text, sender = "user") {
      if (initialState) initialState.style.display = "none";

      const bubble = document.createElement("div");
      bubble.className = sender === "user" ? "flex justify-end" : "flex justify-start";
      bubble.innerHTML = `
        <div class="max-w-xs sm:max-w-md md:max-w-lg px-4 py-3 rounded-2xl text-sm ${
          sender === "user"
            ? "bg-pink-500 text-white rounded-br-none"
            : "bg-gray-100 text-gray-800 rounded-bl-none"
        }">${text}</div>
      `;
      chatContainer.appendChild(bubble);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    async function callAI(prompt) {
      addMessage(prompt, "user");
      addMessage("Thinking...", "ai");

      try {
        const response = await fetch("https://your-backend.onrender.com/ask", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt })
        });
        const data = await response.json();
        chatContainer.lastChild.remove();
        addMessage(data.choices?.[0]?.message?.content || "Sorry, no response.", "ai");
      } catch (err) {
        console.error(err);
        chatContainer.lastChild.remove();
        addMessage("âŒ Could not reach AI service.", "ai");
      }
    }

    sendBtn.addEventListener("click", () => {
      const text = inputField.value.trim();
      if (text) {
        callAI(text);
        inputField.value = "";
      }
    });

    inputField.addEventListener("keypress", e => {
      if (e.key === "Enter") sendBtn.click();
    });
  </script>
</body>
</html>
